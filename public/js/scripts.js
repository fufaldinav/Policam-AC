let slides=document.querySelectorAll("#slides .slide"),currentSlide=0;function nextSlide(){goToSlide(currentSlide+1)}function previousSlide(){goToSlide(currentSlide-1)}function goToSlide(e){slides[currentSlide].classList.remove("showing"),currentSlide=(e+slides.length)%slides.length,slides[currentSlide].classList.add("showing")}let next=document.getElementById("next"),previous=document.getElementById("previous");function leftSwipe(){nextSlide()}function rightSwipe(){previousSlide()}next.onclick=function(){nextSlide()},previous.onclick=function(){previousSlide()},$("#slides").swipe({swipeLeft:leftSwipe,swipeRight:rightSwipe,threshold:0});let config={apiKey:process.env.MIX_FCM_API_KEY,authDomain:process.env.MIX_FCM_AUTH_DOMAIN,databaseURL:process.env.MIX_FCM_DB_URL,projectId:process.env.MIX_FCM_PROJECT_ID,storageBucket:process.env.MIX_FCM_STORAGE_BUCKET,messagingSenderId:process.env.MIX_FCM_SENDER_ID};function sendTokenToServer(e){isTokenSentToServer(e)?console.log("Токен уже отправлен на сервер."):(console.log("Отправка токена на сервер..."),axios.post("/users/token",{token:e}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),setTokenSentToServer(e))}function isTokenSentToServer(e){return window.localStorage.getItem("sentFirebaseMessagingToken")==e}function setTokenSentToServer(e){window.localStorage.setItem("sentFirebaseMessagingToken",e||"")}firebase.initializeApp(config),"granted"===Notification.permission&&subscribe(),window.subscribe=function(){let e=firebase.messaging();e.usePublicVapidKey(process.env.MIX_FCM_PUBLIC_VAPID_KEY),e.requestPermission().then(function(){e.getToken().then(function(e){console.log("Токен успешно получен"),e?sendTokenToServer(e):(console.warn("Не удалось получить токен."),setTokenSentToServer(!1))}).catch(function(e){console.warn("При получении токена произошла ошибка.",e),setTokenSentToServer(!1)})}).catch(function(e){console.warn("Не удалось получить разрешение на показ уведомлений.",e)})};
